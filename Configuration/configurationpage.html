<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>AI Upscaler Plugin</title>
    <style>
        /* AI Upscaler Plugin - Enhanced Styles */
        .upscaler-config {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #f5f7f9 0%, #e8f0fe 100%);
            min-height: 100vh;
        }

        .config-section {
            background: white;
            border-radius: 16px;
            padding: 28px;
            margin-bottom: 24px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            border: 1px solid #e1e8ed;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            animation: slideInUp 0.6s ease;
        }

        .config-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #3498db, #00d4ff);
        }

        .config-section:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 32px rgba(52, 152, 219, 0.15);
        }

        .config-section h2 {
            color: #2c3e50;
            margin: 0 0 24px 0;
            font-size: 22px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .config-section h2::before {
            content: '';
            width: 6px;
            height: 24px;
            background: linear-gradient(135deg, #3498db, #00d4ff);
            border-radius: 3px;
        }

        .config-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin-bottom: 24px;
        }

        .config-item {
            background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
            border-radius: 12px;
            padding: 20px;
            border: 2px solid #e9ecef;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
        }

        .config-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(52, 152, 219, 0.05), rgba(0, 212, 255, 0.05));
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .config-item:hover {
            border-color: #3498db;
            transform: translateY(-4px);
            box-shadow: 0 8px 32px rgba(52, 152, 219, 0.15);
        }

        .config-item:hover::before {
            opacity: 1;
        }

        .config-item.enabled {
            border-color: #27ae60;
            background: linear-gradient(135deg, #f0fff4 0%, #e8f5e8 100%);
            box-shadow: 0 4px 16px rgba(39, 174, 96, 0.2);
        }

        .config-item.enabled::before {
            background: linear-gradient(135deg, rgba(39, 174, 96, 0.1), rgba(46, 204, 113, 0.1));
            opacity: 1;
        }

        .config-item label {
            display: block;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 8px;
            font-size: 15px;
            position: relative;
            z-index: 1;
        }

        .config-item .description {
            color: #7f8c8d;
            font-size: 13px;
            margin-bottom: 16px;
            line-height: 1.5;
            position: relative;
            z-index: 1;
        }

        .config-item input, .config-item select, .config-item textarea {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 14px;
            font-family: inherit;
            transition: all 0.3s ease;
            background: white;
            position: relative;
            z-index: 1;
        }

        .config-item input:focus, .config-item select:focus, .config-item textarea:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 4px rgba(52, 152, 219, 0.1);
            transform: scale(1.02);
        }

        .checkbox-container {
            display: flex;
            align-items: center;
            gap: 16px;
            position: relative;
            z-index: 1;
        }

        /* Standard Jellyfin Checkbox Style (wie AniSearch Plugin) */
        .checkbox-container {
            display: flex;
            align-items: center;
            gap: 8px;
            margin: 8px 0;
        }

        .checkbox-container input[type="checkbox"] {
            width: 18px;
            height: 18px;
            margin: 0;
            cursor: pointer;
            accent-color: #3498db;
        }

        .checkbox-container label {
            margin: 0;
            cursor: pointer;
            font-weight: normal;
            font-size: 14px;
        }

        /* Große Auswahl-Boxen für wichtige Einstellungen */
        .big-checkbox-container {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 16px;
            background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
            border: 2px solid #e9ecef;
            border-radius: 12px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .big-checkbox-container:hover {
            border-color: #3498db;
            background: linear-gradient(135deg, #f0f8ff 0%, #e8f4fd 100%);
        }

        .big-checkbox-container.checked {
            border-color: #27ae60;
            background: linear-gradient(135deg, #f0fff4 0%, #e8f5e8 100%);
            box-shadow: 0 4px 16px rgba(39, 174, 96, 0.2);
        }

        .custom-checkbox {
            position: relative;
            display: inline-block;
            width: 56px;
            height: 28px;
            flex-shrink: 0;
        }

        .custom-checkbox input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .checkbox-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #bdc3c7, #95a5a6);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border-radius: 28px;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
        }

        .checkbox-slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 3px;
            bottom: 3px;
            background: white;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border-radius: 50%;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

        .custom-checkbox input:checked + .checkbox-slider {
            background: linear-gradient(135deg, #3498db, #00d4ff);
            box-shadow: 0 4px 16px rgba(52, 152, 219, 0.4);
        }

        .custom-checkbox input:checked + .checkbox-slider:before {
            transform: translateX(28px);
            box-shadow: 0 2px 12px rgba(0,0,0,0.3);
        }

        .checkbox-slider::after {
            content: '✓';
            position: absolute;
            right: 6px;
            top: 50%;
            transform: translateY(-50%);
            color: white;
            font-weight: bold;
            font-size: 12px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .custom-checkbox input:checked + .checkbox-slider::after {
            opacity: 1;
        }

        .checkbox-label {
            flex: 1;
            margin: 0;
            font-weight: 600;
            color: #2c3e50;
        }

        .checkbox-description {
            color: #7f8c8d;
            font-size: 12px;
            margin-top: 4px;
            line-height: 1.4;
        }

        .checkmark {
            color: #27ae60;
            font-size: 20px;
            margin-right: 8px;
            animation: pulse 2s infinite;
        }

        .save-button {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            border: none;
            padding: 18px 36px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            margin: 24px 0;
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 16px rgba(52, 152, 219, 0.3);
        }

        .save-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .save-button:hover {
            background: linear-gradient(135deg, #2980b9, #1f4e79);
            transform: translateY(-4px) scale(1.05);
            box-shadow: 0 8px 32px rgba(52, 152, 219, 0.4);
        }

        .save-button:hover::before {
            left: 100%;
        }

        .status-indicator {
            display: inline-block;
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: radial-gradient(circle, #27ae60, #2ecc71);
            margin-right: 10px;
            animation: pulse 2s infinite;
            box-shadow: 0 0 0 0 rgba(39, 174, 96, 0.7);
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(39, 174, 96, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(39, 174, 96, 0); }
            100% { box-shadow: 0 0 0 0 rgba(39, 174, 96, 0); }
        }

        .info-box {
            background: linear-gradient(135deg, #e8f5e8, #f0fff4);
            border: 2px solid #27ae60;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            position: relative;
            overflow: hidden;
        }

        .info-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(135deg, #27ae60, #2ecc71);
        }

        .warning-box {
            background: linear-gradient(135deg, #fff3cd, #ffeaa7);
            border: 2px solid #f39c12;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            position: relative;
            overflow: hidden;
        }

        .warning-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .config-section:nth-child(2) { animation-delay: 0.1s; }
        .config-section:nth-child(3) { animation-delay: 0.2s; }
        .config-section:nth-child(4) { animation-delay: 0.3s; }
        .config-section:nth-child(5) { animation-delay: 0.4s; }

        @media (max-width: 768px) {
            .config-row {
                grid-template-columns: 1fr;
                gap: 16px;
            }
            
            .upscaler-config {
                padding: 16px;
            }
            
            .config-section {
                padding: 20px;
                margin-bottom: 16px;
            }
            
            .config-item {
                padding: 16px;
            }
        }
    </style>
</head>
<body>
    <div id="upscalerConfigPage" data-role="page" class="page type-interior pluginConfigurationPage upscalerConfigPage">
        <div data-role="content">
            <div class="content-primary upscaler-config">
                <h1>
                    <span class="status-indicator"></span>
                    <span id="pluginTitle">🚀 AI Upscaler Plugin v1.3.2</span>
                </h1>
                
                <div class="info-box">
                    <p><strong><span class="checkmark">✓</span><span id="successMessage">Plugin successfully loaded and ready for configuration!</span></strong></p>
                    <p><span id="infoMessage">Configure your AI upscaling settings below. All changes are saved automatically.</span></p>
                </div>

                <!-- Core Settings -->
                <div class="config-section">
                    <h2 id="coreSettingsTitle">⚙️ Core Settings</h2>
                    <div class="config-row">
                        <div class="config-item">
                            <label for="chkEnabled" id="enableLabel">Enable Plugin</label>
                            <div class="description" id="enableDesc">Activate AI upscaling for your media library</div>
                            <div class="checkbox-container">
                                <div class="custom-checkbox">
                                    <input type="checkbox" id="chkEnabled">
                                    <span class="checkbox-slider"></span>
                                </div>
                                <span id="enableStatus">Disabled</span>
                            </div>
                        </div>
                        
                        <div class="config-item">
                            <label for="selectLanguage" id="languageLabel">Language / Sprache</label>
                            <div class="description" id="languageDesc">Choose your preferred language</div>
                            <select id="selectLanguage">
                                <option value="en">English</option>
                                <option value="de">Deutsch</option>
                                <option value="fr">Français</option>
                                <option value="es">Español</option>
                                <option value="it">Italiano</option>
                                <option value="pt">Português</option>
                                <option value="ru">Русский</option>
                                <option value="ja">日本語</option>
                                <option value="ko">한국어</option>
                                <option value="zh">中文</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="config-row">
                        <div class="config-item">
                            <label for="chkPlayerButton" id="playerButtonLabel">Show Player Button</label>
                            <div class="description" id="playerButtonDesc">Add upscale button to video player controls</div>
                            <div class="checkbox-container">
                                <div class="custom-checkbox">
                                    <input type="checkbox" id="chkPlayerButton">
                                    <span class="checkbox-slider"></span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="config-item">
                            <label for="chkNotifications" id="notificationsLabel">Enable Notifications</label>
                            <div class="description" id="notificationsDesc">Show upscaling progress and completion notifications</div>
                            <div class="checkbox-container">
                                <div class="custom-checkbox">
                                    <input type="checkbox" id="chkNotifications">
                                    <span class="checkbox-slider"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- AI Model Settings -->
                <div class="config-section">
                    <h2 id="aiModelTitle">🤖 AI Model Settings</h2>
                    <div class="config-row">
                        <div class="config-item">
                            <label for="selectModel" id="modelLabel">AI Model</label>
                            <div class="description" id="modelDesc">Choose the AI model for upscaling</div>
                            <select id="selectModel">
                                <option value="realesrgan">Real-ESRGAN (Recommended)</option>
                                <option value="hat">HAT (High Quality)</option>
                                <option value="srcnn">SRCNN (Fast)</option>
                                <option value="waifu2x">Waifu2x (Anime)</option>
                                <option value="esrgan">ESRGAN (General)</option>
                                <option value="edsr">EDSR (Sharp)</option>
                                <option value="rcan">RCAN (Detail)</option>
                                <option value="srresnet">SRResNet (Balanced)</option>
                                <option value="vdsr">VDSR (Deep)</option>
                            </select>
                        </div>
                        
                        <div class="config-item">
                            <label for="selectScale" id="scaleLabel">Upscale Factor</label>
                            <div class="description" id="scaleDesc">How many times to increase resolution</div>
                            <select id="selectScale">
                                <option value="2">2x (1080p → 4K)</option>
                                <option value="3">3x (Custom)</option>
                                <option value="4">4x (Maximum Quality)</option>
                                <option value="6">6x (Extreme)</option>
                                <option value="8">8x (Ultra Extreme)</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="config-row">
                        <div class="config-item">
                            <label for="selectQuality" id="qualityLabel">Processing Quality</label>
                            <div class="description" id="qualityDesc">Balance between speed and quality</div>
                            <select id="selectQuality">
                                <option value="fast">Fast (Quick processing)</option>
                                <option value="balanced">Balanced (Recommended)</option>
                                <option value="high">High (Best quality)</option>
                                <option value="ultra">Ultra (Maximum quality)</option>
                            </select>
                        </div>
                        
                        <div class="config-item">
                            <label for="chkAdvanced" id="advancedLabel">Advanced Settings</label>
                            <div class="description" id="advancedDesc">Enable expert configuration options</div>
                            <div class="checkbox-container">
                                <div class="custom-checkbox">
                                    <input type="checkbox" id="chkAdvanced">
                                    <span class="checkbox-slider"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- GPU & Performance -->
                <div class="config-section">
                    <h2 id="performanceTitle">⚡ GPU & Performance</h2>
                    <div class="config-row">
                        <div class="config-item">
                            <label for="chkGPU" id="gpuLabel">Use GPU Acceleration</label>
                            <div class="description" id="gpuDesc">Enable GPU processing for faster upscaling</div>
                            <div class="checkbox-container">
                                <div class="custom-checkbox">
                                    <input type="checkbox" id="chkGPU">
                                    <span class="checkbox-slider"></span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="config-item">
                            <label for="selectGPUType" id="gpuTypeLabel">GPU Type</label>
                            <div class="description" id="gpuTypeDesc">Select your GPU architecture</div>
                            <select id="selectGPUType">
                                <option value="auto">Auto-detect</option>
                                <option value="nvidia">NVIDIA (CUDA/DLSS)</option>
                                <option value="amd">AMD (ROCm/FSR)</option>
                                <option value="intel">Intel (XeSS)</option>
                                <option value="apple">Apple Silicon (Metal)</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="config-row">
                        <div class="config-item">
                            <label for="numJobs" id="jobsLabel">Max Concurrent Jobs</label>
                            <div class="description" id="jobsDesc">Number of simultaneous upscaling processes</div>
                            <input type="number" id="numJobs" min="1" max="10" value="1">
                        </div>
                        
                        <div class="config-item">
                            <label for="numMemory" id="memoryLabel">Max Memory (MB)</label>
                            <div class="description" id="memoryDesc">Maximum memory usage per process</div>
                            <input type="number" id="numMemory" min="1024" max="16384" value="4096" step="512">
                        </div>
                    </div>
                </div>

                <!-- Processing Options -->
                <div class="config-section">
                    <h2 id="processingTitle">🎬 Processing Options</h2>
                    <div class="config-row">
                        <div class="config-item">
                            <label for="chkAutoMode" id="autoLabel">Auto Mode</label>
                            <div class="description" id="autoDesc">Automatically upscale new content</div>
                            <div class="checkbox-container">
                                <div class="custom-checkbox">
                                    <input type="checkbox" id="chkAutoMode">
                                    <span class="checkbox-slider"></span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="config-item">
                            <label for="chkLowQualityOnly" id="lowQualityLabel">Process Low Quality Only</label>
                            <div class="description" id="lowQualityDesc">Only upscale videos below threshold</div>
                            <div class="checkbox-container">
                                <div class="custom-checkbox">
                                    <input type="checkbox" id="chkLowQualityOnly">
                                    <span class="checkbox-slider"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="config-row">
                        <div class="config-item">
                            <label for="numThreshold" id="thresholdLabel">Min Resolution Threshold</label>
                            <div class="description" id="thresholdDesc">Minimum height to trigger upscaling</div>
                            <select id="numThreshold">
                                <option value="480">480p (SD)</option>
                                <option value="720">720p (HD)</option>
                                <option value="1080">1080p (FHD)</option>
                                <option value="1440">1440p (QHD)</option>
                            </select>
                        </div>
                        
                        <div class="config-item">
                            <label for="selectFormat" id="formatLabel">Output Format</label>
                            <div class="description" id="formatDesc">Video container for upscaled files</div>
                            <select id="selectFormat">
                                <option value="mp4">MP4 (Recommended)</option>
                                <option value="mkv">MKV (High Quality)</option>
                                <option value="avi">AVI (Compatible)</option>
                                <option value="mov">MOV (Apple)</option>
                                <option value="webm">WebM (Web)</option>
                            </select>
                        </div>
                    </div>
                </div>

                <button type="submit" class="save-button" id="saveButton">
                    <span class="checkmark">✓</span>
                    <span id="saveButtonText">Save Configuration</span>
                </button>
                
                <div class="warning-box" style="display: none;" id="restartWarning">
                    <p><strong>⚠️ <span id="restartMessage">Server restart required for some changes to take effect.</span></strong></p>
                </div>
            </div>
        </div>
    </div>

    <script type="text/javascript">
        // Language translations
        const translations = {
            en: {
                pluginTitle: "🚀 AI Upscaler Plugin v1.3.2",
                successMessage: "Plugin successfully loaded and ready for configuration!",
                infoMessage: "Configure your AI upscaling settings below. All changes are saved automatically.",
                coreSettingsTitle: "⚙️ Core Settings",
                enableLabel: "Enable Plugin",
                enableDesc: "Activate AI upscaling for your media library",
                languageLabel: "Language",
                languageDesc: "Choose your preferred language",
                playerButtonLabel: "Show Player Button",
                playerButtonDesc: "Add upscale button to video player controls",
                notificationsLabel: "Enable Notifications",
                notificationsDesc: "Show upscaling progress and completion notifications",
                aiModelTitle: "🤖 AI Model Settings",
                modelLabel: "AI Model",
                modelDesc: "Choose the AI model for upscaling",
                scaleLabel: "Upscale Factor",
                scaleDesc: "How many times to increase resolution",
                qualityLabel: "Processing Quality",
                qualityDesc: "Balance between speed and quality",
                advancedLabel: "Advanced Settings",
                advancedDesc: "Enable expert configuration options",
                performanceTitle: "⚡ GPU & Performance",
                gpuLabel: "Use GPU Acceleration",
                gpuDesc: "Enable GPU processing for faster upscaling",
                gpuTypeLabel: "GPU Type",
                gpuTypeDesc: "Select your GPU architecture",
                jobsLabel: "Max Concurrent Jobs",
                jobsDesc: "Number of simultaneous upscaling processes",
                memoryLabel: "Max Memory (MB)",
                memoryDesc: "Maximum memory usage per process",
                processingTitle: "🎬 Processing Options",
                autoLabel: "Auto Mode",
                autoDesc: "Automatically upscale new content",
                lowQualityLabel: "Process Low Quality Only",
                lowQualityDesc: "Only upscale videos below threshold",
                thresholdLabel: "Min Resolution Threshold",
                thresholdDesc: "Minimum height to trigger upscaling",
                formatLabel: "Output Format",
                formatDesc: "Video container for upscaled files",
                saveButtonText: "Save Configuration",
                restartMessage: "Server restart required for some changes to take effect.",
                enableStatus: "Disabled"
            },
            de: {
                pluginTitle: "🚀 AI Upscaler Plugin v1.3.2",
                successMessage: "Plugin erfolgreich geladen und konfigurationsbereit!",
                infoMessage: "Konfigurieren Sie Ihre AI-Upscaling-Einstellungen unten. Alle Änderungen werden automatisch gespeichert.",
                coreSettingsTitle: "⚙️ Kerneinstellungen",
                enableLabel: "Plugin aktivieren",
                enableDesc: "AI-Upscaling für Ihre Medienbibliothek aktivieren",
                languageLabel: "Sprache",
                languageDesc: "Wählen Sie Ihre bevorzugte Sprache",
                playerButtonLabel: "Player-Button anzeigen",
                playerButtonDesc: "Upscale-Button zu Video-Player-Steuerelementen hinzufügen",
                notificationsLabel: "Benachrichtigungen aktivieren",
                notificationsDesc: "Upscaling-Fortschritt und Abschluss-Benachrichtigungen anzeigen",
                aiModelTitle: "🤖 AI-Modell-Einstellungen",
                modelLabel: "AI-Modell",
                modelDesc: "Wählen Sie das AI-Modell für Upscaling",
                scaleLabel: "Upscale-Faktor",
                scaleDesc: "Um wie viel die Auflösung erhöht werden soll",
                qualityLabel: "Verarbeitungsqualität",
                qualityDesc: "Balance zwischen Geschwindigkeit und Qualität",
                advancedLabel: "Erweiterte Einstellungen",
                advancedDesc: "Experten-Konfigurationsoptionen aktivieren",
                performanceTitle: "⚡ GPU & Leistung",
                gpuLabel: "GPU-Beschleunigung verwenden",
                gpuDesc: "GPU-Verarbeitung für schnelleres Upscaling aktivieren",
                gpuTypeLabel: "GPU-Typ",
                gpuTypeDesc: "Wählen Sie Ihre GPU-Architektur",
                jobsLabel: "Max. gleichzeitige Jobs",
                jobsDesc: "Anzahl gleichzeitiger Upscaling-Prozesse",
                memoryLabel: "Max. Speicher (MB)",
                memoryDesc: "Maximaler Speicherverbrauch pro Prozess",
                processingTitle: "🎬 Verarbeitungsoptionen",
                autoLabel: "Auto-Modus",
                autoDesc: "Neue Inhalte automatisch upscalen",
                lowQualityLabel: "Nur niedrige Qualität verarbeiten",
                lowQualityDesc: "Nur Videos unter Schwellenwert upscalen",
                thresholdLabel: "Min. Auflösungsschwelle",
                thresholdDesc: "Minimale Höhe zum Auslösen des Upscaling",
                formatLabel: "Ausgabeformat",
                formatDesc: "Video-Container für upscaled Dateien",
                saveButtonText: "Konfiguration speichern",
                restartMessage: "Server-Neustart erforderlich, damit einige Änderungen wirksam werden.",
                enableStatus: "Deaktiviert"
            }
        };

        let currentLanguage = 'en';

        function updateLanguage(lang) {
            currentLanguage = lang;
            const t = translations[lang] || translations.en;
            
            Object.keys(t).forEach(key => {
                const element = document.getElementById(key);
                if (element) {
                    element.textContent = t[key];
                }
            });
            
            // Update enable status
            const enableStatus = document.getElementById('enableStatus');
            const enabled = document.getElementById('chkEnabled').checked;
            if (enableStatus) {
                enableStatus.textContent = enabled ? 
                    (lang === 'de' ? 'Aktiviert' : 'Enabled') : 
                    (lang === 'de' ? 'Deaktiviert' : 'Disabled');
            }
        }

        $('.upscalerConfigPage').on('pageshow', function () {
            Dashboard.showLoadingMsg();
            ApiClient.getPluginConfiguration('f87f700e-679d-43e6-9c7c-b3a410dc3f22').then(function (config) {
                // Load configuration
                $('#chkEnabled').prop('checked', config.Enabled || false);
                $('#selectLanguage').val(config.Language || 'en');
                $('#chkPlayerButton').prop('checked', config.ShowPlayerButton !== false);
                $('#chkNotifications').prop('checked', config.EnableNotifications !== false);
                $('#selectModel').val(config.Model || 'realesrgan');
                $('#selectScale').val(config.Scale || 2);
                $('#selectQuality').val(config.Quality || 'high');
                $('#chkAdvanced').prop('checked', config.UseAdvancedSettings || false);
                $('#chkGPU').prop('checked', config.UseGPU !== false);
                $('#selectGPUType').val(config.GPUType || 'auto');
                $('#numJobs').val(config.MaxConcurrentJobs || 1);
                $('#numMemory').val(config.MaxMemoryUsage || 4096);
                $('#chkAutoMode').prop('checked', config.AutoMode || false);
                $('#chkLowQualityOnly').prop('checked', config.ProcessOnlyLowQuality !== false);
                $('#numThreshold').val(config.MinResolutionThreshold || 720);
                $('#selectFormat').val(config.OutputFormat || 'mp4');
                
                // Update language
                updateLanguage(config.Language || 'en');
                
                // Update UI states
                updateEnableStatus();
                
                Dashboard.hideLoadingMsg();
            }).catch(function() {
                Dashboard.hideLoadingMsg();
            });
        });

        function updateEnableStatus() {
            const enabled = $('#chkEnabled').prop('checked');
            const status = document.getElementById('enableStatus');
            if (status) {
                status.textContent = enabled ? 
                    (currentLanguage === 'de' ? 'Aktiviert' : 'Enabled') : 
                    (currentLanguage === 'de' ? 'Deaktiviert' : 'Disabled');
            }
            
            // Update visual state
            const coreSection = document.querySelector('.config-section');
            if (enabled) {
                coreSection.classList.add('enabled');
            } else {
                coreSection.classList.remove('enabled');
            }
        }

        // Language change handler
        $('#selectLanguage').on('change', function() {
            updateLanguage(this.value);
        });

        // Enable status change handler
        $('#chkEnabled').on('change', updateEnableStatus);

        $('.upscalerConfigPage').on('click', 'button[type="submit"]', function () {
            Dashboard.showLoadingMsg();
            var config = {
                Enabled: $('#chkEnabled').prop('checked'),
                Language: $('#selectLanguage').val(),
                ShowPlayerButton: $('#chkPlayerButton').prop('checked'),
                EnableNotifications: $('#chkNotifications').prop('checked'),
                Model: $('#selectModel').val(),
                Scale: parseInt($('#selectScale').val()),
                Quality: $('#selectQuality').val(),
                UseAdvancedSettings: $('#chkAdvanced').prop('checked'),
                UseGPU: $('#chkGPU').prop('checked'),
                GPUType: $('#selectGPUType').val(),
                MaxConcurrentJobs: parseInt($('#numJobs').val()),
                MaxMemoryUsage: parseInt($('#numMemory').val()),
                AutoMode: $('#chkAutoMode').prop('checked'),
                ProcessOnlyLowQuality: $('#chkLowQualityOnly').prop('checked'),
                MinResolutionThreshold: parseInt($('#numThreshold').val()),
                OutputFormat: $('#selectFormat').val()
            };

            ApiClient.updatePluginConfiguration('f87f700e-679d-43e6-9c7c-b3a410dc3f22', config).then(function () {
                Dashboard.hideLoadingMsg();
                const message = currentLanguage === 'de' ? 'Einstellungen gespeichert!' : 'Configuration saved!';
                Dashboard.alert(message);
                
                // Show restart warning if needed
                if (config.Enabled || config.ShowPlayerButton) {
                    document.getElementById('restartWarning').style.display = 'block';
                }
            }).catch(function() {
                Dashboard.hideLoadingMsg();
                const message = currentLanguage === 'de' ? 'Fehler beim Speichern!' : 'Error saving configuration!';
                Dashboard.alert(message);
            });
        });
    </script>
</body>
</html>